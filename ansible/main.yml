```yaml
---
# Nombre: ansible_install_nginx.yml
# Playbook Ansible para instalar y configurar NGINX en un servidor Ubuntu

- hosts: web_servers
  become: true
  vars:
    nginx_port: 80

  tasks:
    - name: Actualizar caché de apt
      apt:
        update_cache: yes

    - name: Instalar NGINX
      apt:
        name: nginx
        state: present

    - name: Copiar archivo de configuración de NGINX personalizado
      copy:
        src: files/nginx.conf.j2  # Asegúrate de tener este archivo localmente
        dest: /etc/nginx/sites-available/default
        owner: root
        group: root
        mode: '0644'
      notify:
        - Recargar NGINX

    - name: Asegurar que NGINX esté iniciado y habilitado
      service:
        name: nginx
        state: started
        enabled: yes

  handlers:
    - name: Recargar NGINX
      service:
        name: nginx
        state: reloaded
```

```yaml
---
# Nombre: ansible_create_user_and_group.yml
# Playbook Ansible para crear un usuario y un grupo en los servidores

- hosts: all
  become: true
  vars:
    new_username: appuser
    new_groupname: appgroup
    user_password: "{{ lookup('ansible.builtin.env', 'APP_USER_PASSWORD') }}" # Usar una variable de entorno

  tasks:
    - name: Crear grupo de la aplicación si no existe
      group:
        name: "{{ new_groupname }}"
        state: present

    - name: Crear usuario de la aplicación si no existe
      user:
        name: "{{ new_username }}"
        group: "{{ new_groupname }}"
        password: "{{ user_password | password_hash('sha512') }}" # Hashear la contraseña
        shell: /bin/bash
        state: present
        create_home: yes

    - name: Añadir el usuario al grupo sudoers (opcional y con precaución)
      user:
        name: "{{ new_username }}"
        groups: sudo
        append: yes
      when: ansible_os_family == "Debian" or ansible_os_family == "RedHat"
```

```yaml
---
# Nombre: ansible_configure_logrotate.yml
# Playbook Ansible para configurar logrotate para una aplicación específica

- hosts: app_servers
  become: true
  vars:
    app_log_path: /var/log/myapp/*.log
    logrotate_config_name: myapp
    logrotate_entries:
      - "{{ app_log_path }} {"
      - "    daily"
      - "    missingok"
      - "    rotate 7"
      - "    compress"
      - "    delaycompress"
      - "    notifempty"
      - "    create 0640 appuser appgroup"
      - "    postrotate"
      - "        systemctl reload myapp.service > /dev/null || true"
      - "    endscript"
      - "}"

  tasks:
    - name: Crear directorio para los logs de la aplicación si no existe
      file:
        path: "{{ item | dirname }}"
        state: directory
        owner: appuser # Asegúrate de que este usuario exista, creado en un playbook anterior
        group: appgroup # Asegúrate de que este grupo exista
        mode: '0755'
      loop:
        - "/var/log/myapp/access.log"
        - "/var/log/myapp/error.log"

    - name: Copiar configuración de logrotate para la aplicación
      copy:
        content: "{{ logrotate_entries | join('\n') }}"
        dest: "/etc/logrotate.d/{{ logrotate_config_name }}"
        owner: root
        group: root
        mode: '0644'
```